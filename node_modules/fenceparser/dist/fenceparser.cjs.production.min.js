"use strict";function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(t){var e=t[0],i=t[t.length-1];return t.length>1&&e===i&&('"'===e||"'"===i)},r=function(){function t(t){this.input=t,this.start=0,this.current=0}var e=t.prototype;return e.error=function(t){throw new Error("Fenceparser: "+t+".")},e.peek=function(t){return this.input[this.current+(null!=t?t:0)]},e.advance=function(){return this.input[this.current++]},e.isAtEnd=function(){return this.current>=this.input.length},t}(),s=function(t){return new a(t).scan()},n={true:!0,false:!1},h=function(t){return/[a-zA-Z_$-]/.test(t)},u=function(t){return/[0-9]/.test(t)},a=function(t){function i(){var e;return(e=t.apply(this,arguments)||this).output=[],e}e(i,t);var r=i.prototype;return r.string=function(t){for(;this.peek()!==t&&!this.isAtEnd();)this.advance();this.isAtEnd()&&this.error("Unterminated string"),this.advance(),this.output.push(this.input.substring(this.start,this.current))},r.number=function(){for(;u(this.peek())&&!this.isAtEnd();)this.advance();if("-"===this.peek()&&u(this.peek(1))){for(this.advance();u(this.peek());)this.advance();this.output.push(this.input.substring(this.start,this.current))}else{if("."===this.peek()&&u(this.peek(1)))for(this.advance();u(this.peek());)this.advance();this.output.push(parseFloat(this.input.substring(this.start,this.current)))}},r.identifier=function(){for(;t=this.peek(),(h(t)||u(t))&&!this.isAtEnd();)this.advance();var t,e=this.input.substring(this.start,this.current);Object.keys(n).includes(e)?this.output.push(n[e]):this.output.push(e)},r.scan=function(){for(;!this.isAtEnd();){this.start=this.current;var t=this.advance();switch(t){case"{":case"}":case"=":case",":case":":case"[":case"]":this.output.push(t);break;case'"':case"'":this.string(t);break;case" ":case"\r":case"\t":case"\n":break;default:u(t)?this.number():h(t)?this.identifier():this.error("Unexpected character "+t)}}return this.output},i}(r),o=function(t){return new c(t).parse()},c=function(r){function s(){var t;return(t=r.apply(this,arguments)||this).output={},t}e(s,r);var n=s.prototype;return n.object=function(){var t=this,e={},r=function(){var r=t.advance();"number"==typeof r?r=r:"string"==typeof r&&i(r)&&(r=r.slice(1,-1)),r=r,":"===t.peek()?(t.advance(),e[r]=t.value()):e[r]=!0};if(this.advance(),"}"!==this.peek())for(r();","===this.peek();)this.advance(),"}"===this.peek()&&this.error("Trailing comma"),r();return"}"!==this.advance()&&this.error("Unterminated object"),e},n.array=function(){var t=[];if(this.advance(),"]"!==this.peek())for(t.push(this.value());","===this.peek();)this.advance(),"]"===this.peek()&&this.error("Trailing comma"),t.push(this.value());return"]"!==this.advance()&&this.error("Unterminated array"),t},n.value=function(){return"{"===this.peek()?this.object():"["===this.peek()?this.array():"string"==typeof this.peek()&&i(this.peek())?this.advance().slice(1,-1):this.advance()},n.parse=function(){if(this.input.length<1)return null;for(;!this.isAtEnd();)if("{"===this.peek())this.output.highlight||(this.output.highlight={}),this.output.highlight=t({},this.output.highlight,this.object());else{var e=this.advance();"="===this.peek()?(this.advance(),this.output[e]=this.value()):this.output[e]=!0}return this.output},s}(r);exports.default=function(t){return o(s(t))},exports.lex=s,exports.parse=o;
//# sourceMappingURL=fenceparser.cjs.production.min.js.map
